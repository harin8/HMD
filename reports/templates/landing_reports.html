{% extends "layout.html" %}
{% block head_block %}
    {% load static %}
    <title>HMD|Reports</title>
    <script src="{% static 'assets/js/jszip.min.js' %}"></script>
{% endblock %}
{% block body_block %}
<div class="container-fluid">
    <div class="row">
        <div class="col-md-6 py-3 mt-2">
            <h4>Reports</h4>
        </div>
        <div class="col-md-6 py-3 mt-2 text-right" style="padding-right:20px;">
            <a style="color:white" id="backButton" href="{% url 'Reports Landing' %}"><button style="width: 200px;background-color:#0277bd;text-decoration:underline" class="btn btn-secondary back">Back</button></a>
        </div>
    </div>
    <form action="{% url 'Submit Reports' %}" method="post">
        {% csrf_token %}
        <div class="row">
            <div class="col-md-2" id="Status_div">
                <label class="form-label">Status:</label>
                <select name="Status" class="form-control" id="status">
                    <option value="1">Read</option>
                    <option value="2">Unread</option>
                    <option value="3">All</option>
                </select>
            </div>
            <div class="col-md-3" id="Task_div">
                <label class="form-label">Task:</label>
                <div id="checkbox-task">
                    <div class="form-check col-md-12">
                        <input class="form-check-input" name="ROI" type="checkbox" id="roi" value="ROI">
                        <label class="form-check-label" for="roi">ROI</label>
                    </div>
                    <div class="form-check col-md-12">
                        <input class="form-check-input" name="Cert" type="checkbox" id="certificates" value="Certificates">
                        <label class="form-check-label" for="certificates">Certificates</label>
                    </div>
                    <div class="form-check col-md-12">
                        <input class="form-check-input" name="Other" type="checkbox" id="other_forms" value="otherForms">
                        <label class="form-check-label" for="other_forms">Other Forms/Activities</label>
                    </div>
                </div>
            </div>
            <div class="col-md-3" id="Period_div">
                <label class="form-label">Period:</label>
                <div id="accordion">
                    <div class="card">
                        <div class="card-header" id="headingOne">
                            <h5 class="mb-0">
                                <button type="button" class="btn btn-link" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                  ROI Period
                                </button>
                            </h5>
                        </div>
                        <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordion">
                            <div class="card-body">
                                <div class="col-md-12">
                                    <label class="form-label">Select A.Y.:</label>
                                    <select name="A.Y" class="form-control" id="A.Y">
                                        {% for ay in AY_list %}
                                            {% if ay == AY_Selected %}
                                                <option value="{{ay}}" selected>{{ay|title}}</option>
                                            {% else %}
                                                <option value="{{ay}}">{{ay|title}}</option>
                                            {% endif %}
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header" id="headingTwo">
                            <h5 class="mb-0">
                                <button type="button" class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                    Certificate Period
                                </button>
                            </h5>
                        </div>
                        <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordion">
                            <div class="card-body">
                                <input type="date" name="certificateStartDate" class="form-control" placeholder="Select Date">
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header" id="headingThree">
                            <h5 class="mb-0">
                                <button type="button" class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                    Other Forms/Activities
                                </button>
                            </h5>
                        </div>
                        <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordion">
                            <div class="card-body">
                                <input type="date" name="otherFormsStartDate" class="form-control" placeholder="Select Date">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-4" id="GroupName_div">
                <label class="form-label">Group Name:</label>
                <div id="checkbox-group">
                    <div class="form-check form-check-inline col-md-4">
                        <input checked class="form-check-input" name="ESD" type="checkbox" id="esd" value="ESD" >
                        <label class="form-check-label" for="esd">ESD</label>
                    </div>
                    <div class="form-check form-check-inline col-md-4">
                        <input checked class="form-check-input" name="RIS" type="checkbox" id="ris" value="RIS">
                        <label class="form-check-label" for="ris">RIS</label>
                    </div>
                    <div class="form-check form-check-inline col-md-4">
                          <input checked class="form-check-input" name="VHD" type="checkbox" id="vhd" value="VHD">
                          <label class="form-check-label" for="vhd">VHD</label>
                    </div>
                    <div class="form-check form-check-inline col-md-4">
                          <input checked class="form-check-input" name="PRB" type="checkbox" id="prb" value="PRB">
                          <label class="form-check-label" for="prb">PRB</label>
                    </div><br>
                    <div class="form-check form-check-inline col-md-4">
                        <input checked class="form-check-input" name="OS-ESD" type="checkbox" id="os-esd" value="OS-ESD">
                        <label class="form-check-label" for="os-esd">OS-ESD</label>
                    </div>
                    <div class="form-check form-check-inline col-md-4">
                        <input checked class="form-check-input" name="OS-RIS" type="checkbox" id="os-ris" value="OS-RIS">
                        <label class="form-check-label" for="os-ris">OS-RIS</label>
                    </div>
                    <div class="form-check form-check-inline col-md-4">
                          <input checked class="form-check-input" name="OS-VHD" type="checkbox" id="os-vhd" value="OS-VHD">
                          <label class="form-check-label" for="os-vhd">OS-VHD</label>
                    </div>
                    <div class="form-check form-check-inline col-md-4">
                          <input checked class="form-check-input" name="OS-PRB" type="checkbox" id="os-prb" value="OS-PRB">
                          <label class="form-check-label" for="os-prb">OS-PRB</label>
                    </div>
                </div>
            </div>
            <div class="col-md-5" id="ClientName_div">
                <label class="form-label">Client Name:</label>
                <input autocomplete="off" name="Client_Name" id="clientName" list="client_names" value="" class="form-control" onchange="select_change_on_client_name(this.value)">
                <datalist id="client_names">
                <!--<select name="Client_Name" class="form-control" id="clientName" onchange="select_change_on_client_name(this.value)">
                </select>-->
                </datalist>
            </div>
        </div>
        <br><br>
        <div class="row">
            <div class="form-group col-md-3">
                <button type="submit" class="btn btn-success" >Submit</button>&nbsp;&nbsp;
                <button type="reset" class="btn btn-secondary back" name="Reset">Reset</button>
            </div>
        </div>
    </form>
</div>



<div class="container-fluid">
    <div class="row">
        <div class="col-md-12 py-3 mt-2">
            <h4>Result</h4>
        </div>
    </div>
    <br>
    {% if Result_list|length > 0 %}
    <div class="row">
        <div class="col-md-12">
            <div class="card">
                <div class="card-body">
                    <div class="table-responsive">
                        <table cellpadding="1" cellspacing="2" border="0" class="table table-striped table-bordered dataTable" id="existing-certificateList" width="100%">
                            <thead>
                                <tr>
                                    <th align="left">Group Name</th>
                                    <th align="left">Client Code</th>
                                    <th align="left">Client Name</th>
                                    <th align="left">Task Name</th>
                                    <th align="left">Start Date</th>
                                    <th align="left">End Date</th>
                                    <th align="left">Read/Unread</th>
                                </tr>
                            </thead>
                            <tbody>
                            {% for each_cert in Result_list %}
                                <tr>
                                    <td align="left">{{ each_cert.Group_name }}</td>
                                    <td align="left">{{ each_cert.Client_code }}</td>
                                    <td align="left">{{ each_cert.Name }}</td>
                                    <td align="left">{{ each_cert.Type }}</td>
                                    <td align="left">{{ each_cert.Start_date }}</td>
                                    <td align="left">{{ each_cert.End_date }}</td>
                                </tr>
                            {% endfor %}
                            </tbody>
                                <tfoot>
                                    <tr>
                                        <th align="left">Group Name</th>
                                        <th align="left">Client Code</th>
                                        <th align="left">Client Name</th>
                                        <th align="left">Task Name</th>
                                        <th align="left">Start Date</th>
                                        <th align="left">End Date</th>
                                        <th align="left">Read/Unread</th>
                                    </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% else %}
        <div class="col-md-12 py-3 mt-2">
            <h6><center>No Results</center></h6>
        </div>
    {% endif %}
</div>

<script>
    $(document).ready( function () {
        var client_list = {{ Client_list|safe }};
        var client_name_list = new Array();
        for(var i=0; i<client_list.length; i++) {
          client_name_list.push(client_list[i].Name);
        }

        initialize('client_names', client_name_list);

        function initialize(ele_name, list_data) {

          html_cont = '';
          for(var i=0; i<list_data.length;i++) {
            //html_cont += '<option value="' + list_data[i] + '">' + list_data[i] + '</option>';
            html_cont += '<option>' + list_data[i] + '</option>';
          }
          $('#' + ele_name).html(html_cont);
        }
    });
</script>

{% endblock %}